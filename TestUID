FROM centos:latest

ARG USERNAME=docker
ARG USER_UID=1000
ARG USER_GID=$USER_UID

RUN groupadd -g $USER_GID $USERNAME && \
    useradd -u $USER_UID -g $USERNAME -d /home/$USERNAME -s /bin/sh $USERNAME

# RUN USER=$USERNAME && \
#     GROUP=$USERNAME && \
#     curl -SsL https://github.com/boxboat/fixuid/releases/download/v0.5/fixuid-0.5-linux-amd64.tar.gz | tar -C /usr/local/bin -xzf - && \
#     chown root:root /usr/local/bin/fixuid && \
#     chmod 4755 /usr/local/bin/fixuid && \
#     mkdir -p /etc/fixuid && \
#     printf "user: $USER\ngroup: $GROUP\n" > /etc/fixuid/config.yml
# ENTRYPOINT ["fixuid"]

USER $USERNAME
